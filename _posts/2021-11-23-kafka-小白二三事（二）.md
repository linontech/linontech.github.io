---
layout: post
title: "kafka 小白二三事（二）"
subtitle: ""
date: 2021-11-30
categories: [技術]
---

通常 Kafka 集群都會和 ZooKeeper 綁定，ZooKeeper 作為一個分佈式資源的集中服務扮演者協調 Kafka Server 的角色，
每個 Kafka broker 都會到 ZooKeeper 註冊。

建置 Kafka 環境和相關設定

1. 選擇版本並從官網安裝 https://downloads.apache.org/kafka/ 
2. 設定 listeners 服務器真正 bind 的地址和 advertised.listeners，曝露給外部的 ip 地址，如果沒有設定的話會
直接使用 listeners 。他們告訴 Kafka 的客戶端要用什麼協議，哪個 ip 地址去訪問 Kafka 服務。

```angular2html
e.g. 
listeners=PLAINTEXT://HOSTNAME:PORT,SSL://HOSTNAME:PORT

listeners=INSIDE://HOSTNAME:PORT,OUTSIDE://HOSTNAME:PORT
listener.security.protocol.map=INSIDE:SASL_PLAINTEXT,OUTSIDE:SASL_PLAINTEXT

P.S 
PLAINTEXT 代表 listeners 會是不需要授權或者加密的。
SASL_PLAINTEXT 代表需要 SASL 授權，但是不加密
SASL_SSL 代表 SASL 授權且使用 SSL 加密通訊
SSL 使用 SSL 加密通訊
```
